<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>headfooter</title>
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./css/onepagetab.css">
    <script src="./js/bootstrap.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>

    </style>
</head>

<body>
    <header class="py-0 bg-light border-bottom w-100">
        <div class="row  w-100">
            <div class="col-lg-10">
                <ul class="nav me-auto d-none d-lg-flex justify-content-center">
                    <li class="nav-item"><a href="https://bwfbadminton.com/" class="nav-link link-dark px-2 active"
                            aria-current="page">BWF Fan
                            Zone</a>
                    </li>
                    <li class="nav-item"><a href="https://bwfworldtour.bwfbadminton.com/"
                            class="nav-link link-dark px-2">HSBC BWF World
                            Tour</a></li>
                    <li class="nav-item"><a href="https://bwfworldtourfinals.bwfbadminton.com/"
                            class="nav-link link-dark px-2">HSBC BWF
                            World
                            Tour Finals</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                            aria-expanded="false">more</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item " href="https://bwfsudirmancup.bwfbadminton.com/">TotalEnergies
                                    BWF Sudirman
                                    Cup
                                    Finals</a>
                            </li>
                            <li><a class="dropdown-item"
                                    href="https://bwfthomasubercups.bwfbadminton.com/">TotalEnergies BWF Thomas &
                                    Uber
                                    Cup Finals</a>
                            </li>
                            <li><a class="dropdown-item" href="https://olympics.bwfbadminton.com/">Paris 2024
                                    Olympics</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="col-lg-2 px-3 ">
                <ul class="nav justify-content-end">
                    <li class="nav-item "><a href="./signin/signup.html" class="nav-link link-dark px-2">Login</a></li>
                    <li class="nav-item "><a href="./signin/signup.html" class="nav-link link-dark px-2">Sign up</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    <!-- 紅色區域 -->
    <nav class="navbar navbar-expand-md navbar-dark bg-danger sticky-top w-100" aria-label="Fourth navbar example">
        <div class="container-fluid">
            <a href=" ./index.html">
                <img style="height: 55px; box-shadow: 5px 1px 1px rgba(0, 0, 0, 0.316);  
                            border:1px solid rgba(0, 0, 0, 0.601); background-color:white;" src="./img/logo-wt.svg">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample04"
                aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse ms-3" id="navbarsExample04">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">首頁</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./news.html">新聞</a>
                    </li>
                    <li class="nav-item">
                        <a href="./bs5ranking.html" class="nav-link ">世界排名</a>
                    </li>
                    <li class="nav-item">
                        <a href="./calendar.html" class="nav-link ">賽事</a>
                    </li>
                    <li class="nav-item">
                        <a href="./tool.html" class="nav-link ">記分板</a>
                    </li>
                    <li class="nav-item">
                        <a href="./cart.html" class="nav-link ">商店</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                            aria-expanded="false">媒體</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"><span class="bi bi-facebook"> Facebook</span></a>
                            </li>
                            <li><a class="dropdown-item" href="#"><span class="bi bi-twitter-x"> X</span></a></li>
                            <li><a class="dropdown-item" href="#"><span class="bi bi-instagram">
                                        Instagram</span></a>
                            </li>
                        </ul>
                    </li>

                </ul>
                <form role="search">
                    <input class="form-control" type="search" placeholder="Search" aria-label="Search">
                </form>
            </div>
        </div>
    </nav>


    <section style="margin-top:  100px; ;">
        <table id="table" class="table table-bordered table-danger">
            <tr>
                <th style="width: 20px;">serve</th>
                <th>name</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
            </tr>
            <tr>
                <td><img src="./img/badmintonball.jpg" id="img_a" width="20px" height="20px"></td>
                <td id="A_name">A</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td><img src="./img/badmintonball.jpg" id="img_b" width="20px" height="20px"
                        style="visibility: hidden;"></td>
                <td id="B_name">B</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </table>
    </section>
    <section id="controler">
        <div class="d-flex justify-content-evenly">
            <button style="border-radius: 50px;" id="btn_a" onclick="A_point()">A隊得分</button>
            <button style="border-radius: 50px;" id="btn_b" onclick="B_point()">B隊得分</button>

        </div>
        <div class="d-flex justify-content-evenly">

            <button style="border-radius: 50px;" id="btn_reset" onclick="reset()" disabled>重製賽局</button>
        </div>


    </section>
    <section>
        <canvas id="line_chart" style="margin:10px 200px 200px 200px ; "></canvas>
    </section>



















    <section>
        <div class="container-fluid text-bg-dark w-100 d-flex justify-content-around">
            <footer class="row row-cols-1 row-cols-sm-2 row-cols-md-5 py-5  border-top ">


                <div class="col mb-3 ">
                    <h5>QUICK LINKS</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Home</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">NEWS</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">RANKINGS</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">MATCH CENTER</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">TOOL</a></li>
                    </ul>
                </div>

                <div class="col mb-3">
                    <h5>Social Media</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="https://www.facebook.com/bwfbadminton"
                                class="nav-link p-0 text-muted">Facebook</a></li>
                        <li class="nav-item mb-2"><a href="https://twitter.com/bwfmedia"
                                class="nav-link p-0 text-muted">X</a></li>
                        <li class="nav-item mb-2"><a href="https://www.youtube.com/user/bwf"
                                class="nav-link p-0 text-muted">Youtube</a></li>
                        <li class="nav-item mb-2"><a
                                href="https://soundcloud.com/bwfbadminton/bwf-world-superseries-anthem"
                                class="nav-link p-0 text-muted">Soundcloud</a></li>
                    </ul>
                </div>

                <div class="col mb-3">
                    <h5>Website links</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="https://corporate.bwfbadminton.com/"
                                class="nav-link p-0 text-muted">BWF CORPORATE</a></li>
                        <li class="nav-item mb-2"><a href="https://bwfbadminton.com/"
                                class="nav-link p-0 text-muted">BWF FANSITE</a></li>
                        <li class="nav-item mb-2"><a href="http://badmintonworld.tv/"
                                class="nav-link p-0 text-muted">BADMINTONWORLD.TV</a></li>
                        <li class="nav-item mb-2"><a href="https://bwfsudirmancup.bwfbadminton.com/"
                                class="nav-link p-0 text-muted">BWF Sudirman Cup</a></li>
                        <li class="nav-item mb-2"><a href="https://bwfthomasubercups.bwfbadminton.com/"
                                class="nav-link p-0 text-muted">TotalEnergies BWF Thomas & Uber Cup Finals</a></li>
                        <li class="nav-item mb-2"><a href="https://bwfworldchampionships.bwfbadminton.com/"
                                class="nav-link p-0 text-muted">TotalEnergies BWF World Championships</a></li>

                    </ul>
                </div>

                <div class="col mb-3">
                    <h5>BWF HQ Contact</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2">Unit No. 1, Level 29</li>
                        <li class="nav-item mb-2">Naza Tower Platinum Park</li>
                        <li class="nav-item mb-2">No. 10, Persiaran KLCC</li>
                        <li class="nav-item mb-2">50088 Kuala Lumpur</li>
                        <li class="nav-item mb-2">Malaysia</li>
                    </ul>
                </div>
                <div class="col mb-3">
                    <a href="/" class="d-flex align-items-center mb-3 link-dark text-decoration-none">
                        <svg class="bi me-2" width="40" height="32">
                            <use xlink:href="#bootstrap" />
                        </svg>
                    </a>

                </div>
                <p class="text-muted">&copy; 2025</p>
            </footer>
        </div>

    </section>


    <script>
        let inning = 1;
        let a_point = 0;
        let b_point = 0;
        let a_wininning = 0;
        let b_wininning = 0;



        // 选取 A 队每一局的分数元素
        const a_inning1 = A_name.nextElementSibling;
        const a_inning2 = a_inning1.nextElementSibling;
        const a_inning3 = a_inning2.nextElementSibling;

        // 选取 B 队每一局的分数元素
        const b_inning1 = B_name.nextElementSibling;
        const b_inning2 = b_inning1.nextElementSibling;
        const b_inning3 = b_inning2.nextElementSibling;

        let ctx = line_chart.getContext('2d')

        let scoreChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [0],
                datasets: [
                    { label: A_name.innerText, borderColor: 'blue', data: [0], fill: false },
                    { label: B_name.innerText, borderColor: 'red', data: [0], fill: false }
                ]
            },
            options: {
                responsive: true,
                scales: { x: { title: { display: true, text: '總分' } }, y: { title: { display: true, text: '當前得分' } } }
            }
        });

        // A 队名可编辑
        A_name.addEventListener("dblclick", function () {
            let text = this.innerText;
            let input = document.createElement("input");
            input.type = "text";
            input.value = text;
            input.style.width = this.offsetWidth + "px";

            let originalElement = this;
            originalElement.replaceWith(input);
            input.focus();

            function save() {
                originalElement.innerText = input.value || text;
                input.replaceWith(originalElement);
                btn_a.innerText = `${originalElement.innerText}得分`;
                scoreChart.data.datasets[0].label = originalElement.innerText

                scoreChart.update()

            }

            input.addEventListener("blur", save);
            input.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    save();


                }
            });
        });

        // B 队名可编辑
        B_name.addEventListener("dblclick", function () {
            let text = this.innerText;
            let input = document.createElement("input");
            input.type = "text";
            input.value = text;
            input.style.width = this.offsetWidth + "px";

            let originalElement = this;
            originalElement.replaceWith(input);
            input.focus();

            function save() {
                originalElement.innerText = input.value || text;
                input.replaceWith(originalElement);
                btn_b.innerText = `${originalElement.innerText}得分`;
                scoreChart.data.datasets[1].label = originalElement.innerText
                scoreChart.update()


            }

            input.addEventListener("blur", save);
            input.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    save();

                }
            });
        });

        // A 队得分
        function A_point() {
            a_point++;
            img_b.style.visibility = "hidden"
            img_a.style.visibility = "visible"
            switch (inning) {
                case 1:
                    a_inning1.textContent = a_point;
                    break;
                case 2:
                    a_inning2.textContent = a_point;
                    break;
                case 3:
                    a_inning3.textContent = a_point;
                    break;
            }
            scoreChart.data.labels.push(a_point + b_point);
            scoreChart.data.datasets[0].data.push(a_point);
            scoreChart.data.datasets[1].data.push(b_point);
            scoreChart.update()
            checkwininning()
        }

        // B 队得分
        function B_point() {
            b_point++;
            img_a.style.visibility = "hidden"
            img_b.style.visibility = "visible"

            switch (inning) {
                case 1:
                    b_inning1.textContent = b_point;
                    break;
                case 2:
                    b_inning2.textContent = b_point;
                    break;
                case 3:
                    b_inning3.textContent = b_point;
                    break;
            }
            scoreChart.data.labels.push(a_point + b_point);
            scoreChart.data.datasets[0].data.push(a_point);
            scoreChart.data.datasets[1].data.push(b_point);
            scoreChart.update()
            checkwininning()
        }
        function clearscorechart() {
            scoreChart.data.labels = [0]
            scoreChart.data.datasets[0].data = [0]
            scoreChart.data.datasets[1].data = [0]
        }
        function gameend() { // 比赛结束时禁用按钮
            btn_a.disabled = true;
            btn_b.disabled = true;
            btn_reset.disabled = false;
            a_point = 0
            b_point = 0
            a_wininning = 0
            b_wininning = 0
            inning = 1


        }
        //判斷是否進入下一局
        function checkwintwoinning() {
            clearscorechart()

            if (inning == 3) {
                if (a_wininning == 2) {
                    alert(`${A_name.innerText}贏得了這場比賽`)
                }
                else {
                    alert(`${B_name.innerText}贏得了這場比賽`)

                }
                gameend()
            }
            else if (inning == 2) {
                if (a_wininning == 2) {
                    alert(`${A_name.innerText}贏得了這場比賽`)
                    gameend()

                }
                else if (b_wininning == 2) {
                    alert(`${B_name.innerText}贏得了這場比賽`)
                    gameend()
                }
                else {
                    inning++


                }
            }
            else {
                inning++
                img_a.style.visibility = "hidden"
                img_b.style.visibility = "visible"
            }
        }
        // 检查是否结束
        function checkwininning() {//檢查此局是否有獲勝者了
            if (a_point >= 21 || b_point >= 21) {
                if (Math.abs(a_point - b_point) >= 2) {
                    if (a_point > b_point) {
                        a_wininning++
                        alert(`${A_name.innerText}贏得了這局`)
                        checkwintwoinning()
                        a_point = 0
                        b_point = 0
                    }
                    else {
                        b_wininning++
                        alert(`${B_name.innerText}贏得了這局`)
                        checkwintwoinning()
                        a_point = 0
                        b_point = 0
                    }
                }
                else {
                    if (a_point == 30) {
                        a_wininning++


                        alert(`${A_name.innerText}贏得了這局`)
                        checkwintwoinning()
                        a_point = 0
                        b_point = 0
                    }
                    else if (b_point == 30) {
                        b_wininning++


                        alert(`${B_name.innerText}贏得了這局`)
                        checkwintwoinning()
                        a_point = 0
                        b_point = 0
                    }
                }
            }
        }

        function reset() {
            btn_a.disabled = false;
            btn_b.disabled = false;
            btn_reset.disabled = true;
            a_inning1.textContent = 0
            a_inning2.textContent = 0
            a_inning3.textContent = 0
            b_inning1.textContent = 0
            b_inning2.textContent = 0
            b_inning3.textContent = 0
            clearscorechart()
            scoreChart.update()


        }


    </script>
</body>

</html>